{
  "hash": "8a193bdf1a4539ff76cd0a85b04f4c3c",
  "result": {
    "markdown": "---\ntitle: \"The language of models\"\nsubtitle: \"<br><br> Data Science in a Box\"\nauthor: \"[datasciencebox.org](https://datasciencebox.org/)\"\noutput:\n  xaringan::moon_reader:\n    css: [\"../xaringan-themer.css\", \"../slides.css\"]\n    lib_dir: libs\n    anchor_sections: FALSE\n    nature:\n      ratio: \"16:9\"\n      highlightLines: true\n      highlightStyle: solarized-light\n      countIncrementalSlides: false\n---\n\n\n\n\nlayout: true\n  \n<div class=\"my-footer\">\n<span>\n<a href=\"https://datasciencebox.org\" target=\"_blank\">datasciencebox.org</a>\n</span>\n</div> \n\n---\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\nclass: middle\n\n# What is a model?\n\n\n---\n\n## Modelling\n\n- Use models to explain the relationship between variables and to make predictions\n- For now we will focus on **linear** models (but remember there are *many* *many* other types of models too!)\n\n.pull-left[\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u4-d01-language-of-models_files/figure-html/unnamed-chunk-2-1.png){fig-align='center' width=100%}\n:::\n:::\n]\n.pull-right[\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u4-d01-language-of-models_files/figure-html/unnamed-chunk-3-1.png){fig-align='center' width=100%}\n:::\n:::\n]\n\n---\n\nclass: middle\n\n# Data: Paris Paintings\n\n\n---\n\n## Paris Paintings\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npp <- read_csv(\"data/paris-paintings.csv\", na = c(\"n/a\", \"\", \"NA\"))\n```\n:::\n\n- Source: Printed catalogues of 28 auction sales in Paris, 1764 - 1780\n- Data curators Sandra van Ginhoven and Hilary Coe Cronheim (who were PhD students in the Duke Art, Law, and Markets Initiative at the time of putting together this dataset) translated and tabulated the catalogues\n- 3393 paintings, their prices, and descriptive details from sales catalogues over 60 variables\n\n---\n\n\n## Auctions today\n\n.center[\n<iframe width=\"840\" height=\"473\" src=\"https://www.youtube.com/embed/apaE1Q7r4so\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n]\n\n\n---\n\n## Auctions back in the day\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](img/old-auction.png){fig-align='center' width=65%}\n:::\n:::\n\n.footnote[\n.small[\nPierre-Antoine de Machy, Public Sale at the Hôtel Bullion, Musée Carnavalet, Paris (18th century)\n]\n]\n\n---\n\n\n## Paris auction market\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](img/auction-trend-paris.png){fig-align='center' width=60%}\n:::\n:::\n\n\n.footnote[\n.small[\nPlot credit: Sandra van Ginhoven\n]\n]\n\n\n---\n\n## Départ pour la chasse\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](img/depart-pour-la-chasse.png){fig-align='center' width=65%}\n:::\n:::\n\n---\n\n\n## Auction catalog text\n\n.pull-left[\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](img/auction-catalogue.png){fig-align='center' width=60%}\n:::\n:::\n\n]\n.pull-right[\n.small[\nTwo paintings very rich in composition, of a beautiful execution, and whose merit is very remarkable, each 17 inches 3 lines high, 23 inches wide; the first, painted on wood, comes from the Cabinet of Madame la Comtesse de Verrue; it represents a departure for the hunt: it shows in the front a child on a white horse, a man who gives the horn to gather the dogs, a falconer and other figures nicely distributed across the width of the painting; two horses drinking from a fountain; on the right in the corner a lovely country house topped by a terrace, on which people are at the table, others who play instruments; trees and fabriques pleasantly enrich the background.\n]\n]\n\n\n---\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](img/painting1.png){fig-align='center' width=60%}\n:::\n\n::: {.cell-output-display}\n![](img/painting2.png){fig-align='center' width=60%}\n:::\n\n::: {.cell-output-display}\n![](img/painting3.png){fig-align='center' width=60%}\n:::\n:::\n\n---\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npp %>%\n  filter(name == \"R1777-89a\") %>%\n  glimpse()\n```\n:::\n\n\n.small[\n.pull-left[\n\n::: {.cell layout-align=\"center\" output.lines='23'}\n::: {.cell-output .cell-output-stdout}\n```\nRows: 1\nColumns: 61\n$ name              <chr> \"R1777-89a\"\n$ sale              <chr> \"R1777\"\n$ lot               <chr> \"89\"\n$ position          <dbl> 0.3755274\n$ dealer            <chr> \"R\"\n$ year              <dbl> 1777\n$ origin_author     <chr> \"D/FL\"\n$ origin_cat        <chr> \"D/FL\"\n$ school_pntg       <chr> \"D/FL\"\n$ diff_origin       <dbl> 0\n$ logprice          <dbl> 8.575462\n$ price             <dbl> 5300\n$ count             <dbl> 1\n$ subject           <chr> \"D\\x8epart pour la chasse\"\n$ authorstandard    <chr> \"Wouwerman, Philips\"\n$ artistliving      <dbl> 0\n$ authorstyle       <chr> NA\n$ author            <chr> \"Philippe Wouwermans\"\n$ winningbidder     <chr> \"Langlier, Jacques for Poullain, Anto…\n$ winningbiddertype <chr> \"DC\"\n$ endbuyer          <chr> \"C\"\n...\n```\n:::\n:::\n\n]\n.pull-right[\n\n::: {.cell layout-align=\"center\" output.lines='[24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44]'}\n::: {.cell-output .cell-output-stdout}\n```\n...\n$ Interm            <dbl> 1\n$ type_intermed     <chr> \"D\"\n$ Height_in         <dbl> 17.25\n$ Width_in          <dbl> 23\n$ Surface_Rect      <dbl> 396.75\n$ Diam_in           <dbl> NA\n$ Surface_Rnd       <dbl> NA\n$ Shape             <chr> \"squ_rect\"\n$ Surface           <dbl> 396.75\n$ material          <chr> \"bois\"\n$ mat               <chr> \"b\"\n$ materialCat       <chr> \"wood\"\n$ quantity          <dbl> 1\n$ nfigures          <dbl> 0\n$ engraved          <dbl> 0\n$ original          <dbl> 0\n$ prevcoll          <dbl> 1\n$ othartist         <dbl> 0\n$ paired            <dbl> 1\n$ figures           <dbl> 0\n$ finished          <dbl> 0\n...\n```\n:::\n:::\n\n]\n]\n\n\n\n---\n\nclass: middle\n\n# Modeling the relationship between variables\n\n---\n\n\n## Heights\n\n.small[\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(data = pp, aes(x = Height_in)) +\n  geom_histogram(binwidth = 5) +\n  labs(x = \"Height, in inches\", y = NULL)\n```\n\n::: {.cell-output-display}\n![](u4-d01-language-of-models_files/figure-html/height-dist-1.png){fig-align='center' width=60%}\n:::\n:::\n\n]\n\n\n---\n\n## Widths\n\n.small[\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(data = pp, aes(x = Width_in)) +\n  geom_histogram(binwidth = 5) +\n  labs(x = \"Width, in inches\", y = NULL)\n```\n\n::: {.cell-output-display}\n![](u4-d01-language-of-models_files/figure-html/width-dist-1.png){fig-align='center' width=60%}\n:::\n:::\n]\n\n---\n\n\n## Models as functions\n\n- We can represent relationships between variables using **functions**\n- A function is a mathematical concept: the relationship between an output and one or more inputs\n  - Plug in the inputs and receive back the output\n  - Example: The formula $y = 3x + 7$ is a function with input $x$ and output $y$. If $x$ is $5$, $y$ is $22$, $y = 3 \\times 5 + 7 = 22$\n\n\n---\n\n## Height as a function of width\n\n.panelset[\n.panel[.panel-name[Plot]\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u4-d01-language-of-models_files/figure-html/unnamed-chunk-13-1.png){fig-align='center' width=60%}\n:::\n:::\n]\n.panel[.panel-name[Code]\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(data = pp, aes(x = Width_in, y = Height_in)) +\n  geom_point() +\n  geom_smooth(method = \"lm\") +\n  labs(\n    title = \"Height vs. width of paintings\",\n    subtitle = \"Paris auctions, 1764 - 1780\",\n    x = \"Width (inches)\",\n    y = \"Height (inches)\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 258 rows containing non-finite values\n(stat_smooth).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 258 rows containing missing values (geom_point).\n```\n:::\n:::\n]\n]\n\n---\n\n\n## ... without the measure of uncertainty\n\n.panelset[\n.panel[.panel-name[Plot]\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u4-d01-language-of-models_files/figure-html/unnamed-chunk-14-1.png){fig-align='center' width=60%}\n:::\n:::\n\n]\n.panel[.panel-name[Code]\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(data = pp, aes(x = Width_in, y = Height_in)) +\n  geom_point() +\n  geom_smooth(method = \"lm\", \n              se = FALSE) + #<<\n  labs(\n    title = \"Height vs. width of paintings\",\n    subtitle = \"Paris auctions, 1764 - 1780\",\n    x = \"Width (inches)\",\n    y = \"Height (inches)\"\n  )\n```\n:::\n\n]\n]\n\n\n---\n\n## ... with different cosmetic choices\n\n.panelset[\n.panel[.panel-name[Plot]\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u4-d01-language-of-models_files/figure-html/unnamed-chunk-15-1.png){fig-align='center' width=60%}\n:::\n:::\n]\n.panel[.panel-name[Code]\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(data = pp, aes(x = Width_in, y = Height_in)) +\n  geom_point() +\n  geom_smooth(method = \"lm\", se = FALSE,\n              color = \"#8E2C90\", linetype = \"dashed\", size = 3) + #<<\n  labs(\n    title = \"Height vs. width of paintings\",\n    subtitle = \"Paris auctions, 1764 - 1780\",\n    x = \"Width (inches)\",\n    y = \"Height (inches)\"\n  )\n```\n:::\n]\n]\n\n---\n\n\n## Other smoothing methods: gam\n\n.panelset[\n.panel[.panel-name[Plot]\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u4-d01-language-of-models_files/figure-html/unnamed-chunk-16-1.png){fig-align='center' width=60%}\n:::\n:::\n\n]\n.panel[.panel-name[Code]\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(data = pp, aes(x = Width_in, y = Height_in)) +\n  geom_point() +\n  geom_smooth(method = \"gam\", #<<\n              se = FALSE, color = \"#8E2C90\") + \n  labs(\n    title = \"Height vs. width of paintings\",\n    subtitle = \"Paris auctions, 1764 - 1780\",\n    x = \"Width (inches)\",\n    y = \"Height (inches)\"\n  )\n```\n:::\n\n]\n]\n\n\n---\n\n## Other smoothing methods: loess\n\n.panelset[\n.panel[.panel-name[Plot]\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u4-d01-language-of-models_files/figure-html/unnamed-chunk-17-1.png){fig-align='center' width=60%}\n:::\n:::\n]\n.panel[.panel-name[Code]\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(data = pp, aes(x = Width_in, y = Height_in)) +\n  geom_point() +\n  geom_smooth(method = \"loess\", #<<\n              se = FALSE, color = \"#8E2C90\") + \n  labs(\n    title = \"Height vs. width of paintings\",\n    subtitle = \"Paris auctions, 1764 - 1780\",\n    x = \"Width (inches)\",\n    y = \"Height (inches)\"\n  )\n```\n:::\n]\n]\n\n---\n\n\n## Vocabulary\n\n- **Response variable:** Variable whose behavior or variation you are trying to understand, on the y-axis\n\n--\n- **Explanatory variables:** Other variables that you want to use to explain the variation in the response, on the x-axis\n\n--\n- **Predicted value:** Output of the **model function**\n  - The model function gives the typical (expected) value of the response variable *conditioning* on the explanatory variables\n  \n--\n- **Residuals:** A measure of how far each case is from its predicted value (based on a particular model)\n  - Residual = Observed value - Predicted value\n  - Tells how far above/below the expected value each case is\n\n\n---\n\n## Residuals\n\n.panelset[\n.panel[.panel-name[Plot]\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u4-d01-language-of-models_files/figure-html/unnamed-chunk-18-1.png){fig-align='center' width=60%}\n:::\n:::\n]\n.panel[.panel-name[Code]\n.small[\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nht_wt_fit <- linear_reg() %>%\n  set_engine(\"lm\") %>%\n  fit(Height_in ~ Width_in, data = pp)\n\nht_wt_fit_tidy <- tidy(ht_wt_fit$fit) \nht_wt_fit_aug  <- augment(ht_wt_fit$fit) %>%\n  mutate(res_cat = ifelse(.resid > 0, TRUE, FALSE))\n\nggplot(data = ht_wt_fit_aug) +\n  geom_point(aes(x = Width_in, y = Height_in, color = res_cat)) +\n  geom_line(aes(x = Width_in, y = .fitted), size = 0.75, color = \"#8E2C90\") + \n  labs(\n    title = \"Height vs. width of paintings\",\n    subtitle = \"Paris auctions, 1764 - 1780\",\n    x = \"Width (inches)\",\n    y = \"Height (inches)\"\n  ) +\n  guides(color = \"none\") +\n  scale_color_manual(values = c(\"#260b27\", \"#e6b0e7\")) +\n  geom_text(aes(x = 0, y = 150), label = \"Positive residual\", color = \"#e6b0e7\", hjust = 0, size = 8) +\n  geom_text(aes(x = 150, y = 25), label = \"Negative residual\", color = \"#260b27\", hjust = 0, size = 8)\n```\n:::\n]\n]\n]\n\n---\n\n\n.question[\nThe plot below displays the relationship between height and width of paintings. The only difference from the previous plots is that it uses a smaller alpha value, making the points somewhat transparent. What feature is apparent in this plot that was not (as) apparent in the previous plots? What might be the reason for this feature?\n]\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u4-d01-language-of-models_files/figure-html/height-width-plot-alpha-1.png){fig-align='center' width=55%}\n:::\n:::\n\n---\n\n## Landscape paintings\n\n- Landscape painting is the depiction in art of landscapes – natural scenery such as mountains, valleys, trees, rivers, and forests, especially where the main subject is a wide view – with its elements arranged into a coherent\ncomposition.<sup>1</sup>\n  - Landscape paintings tend to be wider than they are long.\n- Portrait painting is a genre in painting, where the intent is to depict a human subject.<sup>2</sup>\n  - Portrait paintings tend to be longer than they are wide.\n\n.footnote[\n[1] Source: Wikipedia, [Landscape painting](https://en.wikipedia.org/wiki/Landscape_painting)\n\n[2] Source: Wikipedia, [Portait painting](https://en.wikipedia.org/wiki/Portrait_painting)\n]\n\n---\n\n\n## Multiple explanatory variables\n\n.panelset[\n.panel[.panel-name[Plot]\n.pull-left-narrow[\n.question[\nHow, if at all, does the relationship between width and height of paintings vary by whether or not they have any landscape elements?\n]\n]\n.pull-right-wide[\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u4-d01-language-of-models_files/figure-html/unnamed-chunk-19-1.png){fig-align='center' width=80%}\n:::\n:::\n\n]\n]\n.panel[.panel-name[Code]\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(data = pp, aes(x = Width_in, y = Height_in, color = factor(landsALL))) +\n  geom_point(alpha = 0.4) +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  labs(\n    title = \"Height vs. width of paintings, by landscape features\",\n    subtitle = \"Paris auctions, 1764 - 1780\",\n    x = \"Width (inches)\",\n    y = \"Height (inches)\",\n    color = \"landscape\"\n  ) +\n  scale_color_manual(values = c(\"#E48957\", \"#071381\"))\n```\n:::\n\n]\n]\n\n\n---\n\n## Extending regression lines\n\n.panelset[\n.panel[.panel-name[Plot]\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u4-d01-language-of-models_files/figure-html/unnamed-chunk-20-1.png){fig-align='center' width=65%}\n:::\n:::\n]\n.panel[.panel-name[Code]\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(data = pp, aes(x = Width_in, y = Height_in, color = factor(landsALL))) +\n  geom_point(alpha = 0.4) +\n  geom_smooth(method = \"lm\", se = FALSE,\n              fullrange = TRUE) + #<<\n  labs(\n    title = \"Height vs. width of paintings, by landscape features\",\n    subtitle = \"Paris auctions, 1764 - 1780\",\n    x = \"Width (inches)\",\n    y = \"Height (inches)\",\n    color = \"landscape\"\n  ) +\n  scale_color_manual(values = c(\"#E48957\", \"#071381\"))\n```\n:::\n]\n]\n\n---\n\n\n## Models - upsides and downsides\n\n- Models can sometimes reveal patterns that are not evident in a graph of the data. This is a great advantage of modeling over simple visual inspection of data. \n- There is a real risk, however, that a model is imposing structure that is not really there on the scatter of data, just as people imagine animal shapes in the stars. A skeptical approach is always warranted.\n\n\n---\n\n## Variation around the model...\n\nis just as important as the model, if not more!  \n\n*Statistics is the explanation of variation in the context of what remains unexplained.*\n\n- The scatter suggests that there might be other factors that account for large parts of painting-to-painting variability, or perhaps just that randomness plays a big role.\n- Adding more explanatory variables to a model can sometimes usefully reduce the size of the scatter around the model. (We'll talk more about this later.)\n\n---\n\n\n## How do we use models?\n\n- Explanation: Characterize the relationship between $y$ and $x$ via *slopes* for numerical explanatory variables or *differences* for categorical explanatory variables\n- Prediction: Plug in $x$, get the predicted $y$\n",
    "supporting": [
      "u4-d01-language-of-models_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../../site_libs/font-awesome/css/all.css\" rel=\"stylesheet\" />\n<link href=\"../../../site_libs/font-awesome/css/v4-shims.css\" rel=\"stylesheet\" />\n<link href=\"../../../site_libs/panelset/panelset.css\" rel=\"stylesheet\" />\n<script src=\"../../../site_libs/panelset/panelset.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}