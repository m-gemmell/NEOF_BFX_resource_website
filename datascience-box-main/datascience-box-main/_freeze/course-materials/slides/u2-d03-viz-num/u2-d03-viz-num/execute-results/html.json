{
  "hash": "437673f70d88508caff7e2f728dcd0b6",
  "result": {
    "markdown": "---\ntitle: \"Visualising numerical data\"\nsubtitle: \"<br><br> Data Science in a Box\"\nauthor: \"[datasciencebox.org](https://datasciencebox.org/)\"\noutput:\n  xaringan::moon_reader:\n    css: [\"../xaringan-themer.css\", \"../slides.css\"]\n    lib_dir: libs\n    nature:\n      ratio: \"16:9\"\n      highlightLines: true\n      highlightStyle: solarized-light\n      countIncrementalSlides: false\n---\n\n\n\n\nlayout: true\n  \n<div class=\"my-footer\">\n<span>\n<a href=\"https://datasciencebox.org\" target=\"_blank\">datasciencebox.org</a>\n</span>\n</div> \n\n---\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\nclass: middle\n\n# Terminology\n\n\n---\n\n## Number of variables involved\n\n- Univariate data analysis - distribution of single variable\n- Bivariate data analysis - relationship between two variables\n- Multivariate data analysis - relationship between many variables at once, usually focusing on the relationship between two while conditioning for others\n\n---\n\n\n## Types of variables\n\n- **Numerical variables** can be classified as **continuous** or **discrete** based on whether or not the variable can take on an infinite number of values or only non-negative whole numbers, respectively.\n- If the variable is **categorical**, we can determine if it is **ordinal** based on whether or not the levels have a natural ordering.\n\n\n---\n\nclass: middle\n\n# Data\n\n---\n\n\n## Data: Lending Club\n\n.pull-left-wide[\n\n- Thousands of loans made through the Lending Club, which is a platform that allows individuals to lend to other individuals\n\n- Not all loans are created equal -- ease of getting a loan depends on (apparent) ability to pay back the loan\n\n- Data includes loans *made*, these are not loan applications\n]\n.pull-right-narrow[\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](img/lending-club.png){fig-align='center' width=100%}\n:::\n:::\n\n]\n\n\n---\n\n## Take a peek at data\n\n::: {.cell layout-align=\"center\" output.lines='18'}\n\n```{.r .cell-code}\nlibrary(openintro)\nglimpse(loans_full_schema)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 10,000\nColumns: 55\n$ emp_title                        <chr> \"global config enginee…\n$ emp_length                       <dbl> 3, 10, 3, 1, 10, NA, 1…\n$ state                            <fct> NJ, HI, WI, PA, CA, KY…\n$ homeownership                    <fct> MORTGAGE, RENT, RENT, …\n$ annual_income                    <dbl> 90000, 40000, 40000, 3…\n$ verified_income                  <fct> Verified, Not Verified…\n$ debt_to_income                   <dbl> 18.01, 5.04, 21.15, 10…\n$ annual_income_joint              <dbl> NA, NA, NA, NA, 57000,…\n$ verification_income_joint        <fct> , , , , Verified, , No…\n$ debt_to_income_joint             <dbl> NA, NA, NA, NA, 37.66,…\n$ delinq_2y                        <int> 0, 0, 0, 0, 0, 1, 0, 1…\n$ months_since_last_delinq         <int> 38, NA, 28, NA, NA, 3,…\n$ earliest_credit_line             <dbl> 2001, 1996, 2006, 2007…\n$ inquiries_last_12m               <int> 6, 1, 4, 0, 7, 6, 1, 1…\n$ total_credit_lines               <int> 28, 30, 31, 4, 22, 32,…\n$ open_credit_lines                <int> 10, 14, 10, 4, 16, 12,…\n...\n```\n:::\n:::\n\n---\n\n\n## Selected variables\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nloans <- loans_full_schema %>%\n  select(loan_amount, interest_rate, term, grade, \n         state, annual_income, homeownership, debt_to_income)\nglimpse(loans)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 10,000\nColumns: 8\n$ loan_amount    <int> 28000, 5000, 2000, 21600, 23000, 5000, 2…\n$ interest_rate  <dbl> 14.07, 12.61, 17.09, 6.72, 14.07, 6.72, …\n$ term           <dbl> 60, 36, 36, 36, 36, 36, 60, 60, 36, 36, …\n$ grade          <ord> C, C, D, A, C, A, C, B, C, A, C, B, C, B…\n$ state          <fct> NJ, HI, WI, PA, CA, KY, MI, AZ, NV, IL, …\n$ annual_income  <dbl> 90000, 40000, 40000, 30000, 35000, 34000…\n$ homeownership  <fct> MORTGAGE, RENT, RENT, RENT, RENT, OWN, M…\n$ debt_to_income <dbl> 18.01, 5.04, 21.15, 10.16, 57.96, 6.46, …\n```\n:::\n:::\n\n---\n\n## Selected variables\n\n<br>\n\n.midi[\nvariable        | description\n----------------|-------------\n`loan_amount`   |\tAmount of the loan received, in US dollars\n`interest_rate` |\tInterest rate on the loan, in an annual percentage\n`term`\t        | The length of the loan, which is always set as a whole number of months\n`grade`\t        | Loan grade, which takes a values A through G and represents the quality of the loan and its likelihood of being repaid\n`state`         |\tUS state where the borrower resides\n`annual_income` |\tBorrower’s annual income, including any second income, in US dollars\n`homeownership`\t| Indicates whether the person owns, owns but has a mortgage, or rents\n`debt_to_income` | Debt-to-income ratio\n]\n\n---\n\n\n## Variable types\n\n<br>\n\nvariable        | type\n----------------|-------------\n`loan_amount`   |\tnumerical, continuous\n`interest_rate` |\tnumerical, continuous\n`term`\t        | numerical, discrete\n`grade`\t        | categorical, ordinal\n`state`         |\tcategorical, not ordinal\n`annual_income` |\tnumerical, continuous\n`homeownership`\t| categorical, not ordinal\n`debt_to_income` | numerical, continuous\n\n\n---\n\nclass: middle\n\n# Visualizing numerical data\n\n---\n\n\n## Describing shapes of numerical distributions\n\n- shape:\n    - skewness: right-skewed, left-skewed, symmetric (skew is to the side of the longer tail)\n    - modality: unimodal, bimodal, multimodal, uniform\n- center: mean (`mean`), median (`median`), mode (not always useful)\n- spread: range (`range`), standard deviation (`sd`), inter-quartile range (`IQR`)\n- unusual observations\n\n\n---\n\nclass: middle\n\n# Histogram\n\n---\n\n\n## Histogram\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = loan_amount)) +\n  geom_histogram()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`stat_bin()` using `bins = 30`. Pick better value with\n`binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-5-1.png){fig-align='center' width=50%}\n:::\n:::\n\n---\n\n## Histograms and binwidth\n\n.panelset[\n.panel[.panel-name[binwidth = 1000]\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = loan_amount)) +\n  geom_histogram(binwidth = 1000)\n```\n\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-6-1.png){fig-align='center' width=50%}\n:::\n:::\n]\n.panel[.panel-name[binwidth = 5000]\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = loan_amount)) +\n  geom_histogram(binwidth = 5000)\n```\n\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-7-1.png){fig-align='center' width=50%}\n:::\n:::\n]\n.panel[.panel-name[binwidth = 20000]\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = loan_amount)) +\n  geom_histogram(binwidth = 20000)\n```\n\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-8-1.png){fig-align='center' width=50%}\n:::\n:::\n]\n]\n\n---\n\n\n## Customizing histograms\n\n.panelset[\n.panel[.panel-name[Plot]\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-9-1.png){fig-align='center' width=60%}\n:::\n:::\n\n]\n.panel[.panel-name[Code]\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = loan_amount)) +\n  geom_histogram(binwidth = 5000) +\n  labs( #<<\n    x = \"Loan amount ($)\", #<<\n    y = \"Frequency\", #<<\n    title = \"Amounts of Lending Club loans\" #<<\n  ) #<<\n```\n:::\n\n]\n]\n\n\n---\n\n## Fill with a categorical variable\n\n.panelset[\n.panel[.panel-name[Plot]\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-10-1.png){fig-align='center' width=60%}\n:::\n:::\n]\n.panel[.panel-name[Code]\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = loan_amount, \n                  fill = homeownership)) + #<<\n  geom_histogram(binwidth = 5000,\n                 alpha = 0.5) + #<<\n  labs(\n    x = \"Loan amount ($)\",\n    y = \"Frequency\",\n    title = \"Amounts of Lending Club loans\"\n  )\n```\n:::\n]\n]\n\n---\n\n\n## Facet with a categorical variable\n\n.panelset[\n.panel[.panel-name[Plot]\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-11-1.png){fig-align='center' width=60%}\n:::\n:::\n\n]\n.panel[.panel-name[Code]\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = loan_amount, fill = homeownership)) + \n  geom_histogram(binwidth = 5000) +\n  labs(\n    x = \"Loan amount ($)\",\n    y = \"Frequency\",\n    title = \"Amounts of Lending Club loans\"\n  ) +\n  facet_wrap(~ homeownership, nrow = 3) #<<\n```\n:::\n\n]\n]\n\n\n---\n\nclass: middle\n\n# Density plot\n\n---\n\n\n## Density plot\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = loan_amount)) +\n  geom_density()\n```\n\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-12-1.png){fig-align='center' width=60%}\n:::\n:::\n\n---\n\n## Density plots and adjusting bandwidth\n\n.panelset[\n.panel[.panel-name[adjust = 0.5]\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = loan_amount)) +\n  geom_density(adjust = 0.5)\n```\n\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-13-1.png){fig-align='center' width=50%}\n:::\n:::\n]\n.panel[.panel-name[adjust = 1]\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = loan_amount)) +\n  geom_density(adjust = 1) # default bandwidth\n```\n\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-14-1.png){fig-align='center' width=50%}\n:::\n:::\n]\n.panel[.panel-name[adjust = 2]\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = loan_amount)) +\n  geom_density(adjust = 2)\n```\n\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-15-1.png){fig-align='center' width=50%}\n:::\n:::\n]\n]\n\n---\n\n\n## Customizing density plots\n\n.panelset[\n.panel[.panel-name[Plot]\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-16-1.png){fig-align='center' width=60%}\n:::\n:::\n\n]\n.panel[.panel-name[Code]\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = loan_amount)) +\n  geom_density(adjust = 2) +\n  labs( #<<\n    x = \"Loan amount ($)\", #<<\n    y = \"Density\", #<<\n    title = \"Amounts of Lending Club loans\" #<<\n  ) #<<\n```\n:::\n\n]\n]\n\n\n---\n\n## Adding a categorical variable\n\n.panelset[\n.panel[.panel-name[Plot]\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-17-1.png){fig-align='center' width=60%}\n:::\n:::\n]\n.panel[.panel-name[Code]\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = loan_amount, \n                  fill = homeownership)) + #<<\n  geom_density(adjust = 2, \n               alpha = 0.5) + #<<\n  labs(\n    x = \"Loan amount ($)\",\n    y = \"Density\",\n    title = \"Amounts of Lending Club loans\", \n    fill = \"Homeownership\" #<<\n  )\n```\n:::\n]\n]\n\n---\n\n\nclass: middle\n\n# Box plot\n\n\n---\n\n## Box plot\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = interest_rate)) +\n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-18-1.png){fig-align='center' width=60%}\n:::\n:::\n\n---\n\n\n## Box plot and outliers\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = annual_income)) +\n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-19-1.png){fig-align='center' width=60%}\n:::\n:::\n\n---\n\n## Customizing box plots\n\n.panelset[\n.panel[.panel-name[Plot]\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-20-1.png){fig-align='center' width=60%}\n:::\n:::\n]\n.panel[.panel-name[Code]\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = interest_rate)) +\n  geom_boxplot() +\n  labs(\n    x = \"Interest rate (%)\",\n    y = NULL,\n    title = \"Interest rates of Lending Club loans\"\n  ) +\n  theme( #<<\n    axis.ticks.y = element_blank(), #<<\n    axis.text.y = element_blank() #<<\n  ) #<<\n```\n:::\n]\n]\n\n---\n\n\n## Adding a categorical variable\n\n.panelset[\n.panel[.panel-name[Plot]\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-21-1.png){fig-align='center' width=60%}\n:::\n:::\n\n]\n.panel[.panel-name[Code]\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = interest_rate,\n                  y = grade)) + #<<\n  geom_boxplot() +\n  labs(\n    x = \"Interest rate (%)\",\n    y = \"Grade\",\n    title = \"Interest rates of Lending Club loans\",\n    subtitle = \"by grade of loan\" #<<\n  )\n```\n:::\n\n]\n]\n\n\n---\n\nclass: middle\n\n# Relationships numerical variables\n\n---\n\n\n## Scatterplot\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = debt_to_income, y = interest_rate)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-22-1.png){fig-align='center' width=60%}\n:::\n:::\n\n---\n\n## Hex plot\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans, aes(x = debt_to_income, y = interest_rate)) +\n  geom_hex()\n```\n\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-23-1.png){fig-align='center' width=60%}\n:::\n:::\n\n---\n\n\n## Hex plot\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(loans %>% filter(debt_to_income < 100), \n       aes(x = debt_to_income, y = interest_rate)) +\n  geom_hex()\n```\n\n::: {.cell-output-display}\n![](u2-d03-viz-num_files/figure-html/unnamed-chunk-24-1.png){fig-align='center' width=60%}\n:::\n:::\n",
    "supporting": [
      "u2-d03-viz-num_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../../site_libs/font-awesome/css/all.css\" rel=\"stylesheet\" />\n<link href=\"../../../site_libs/font-awesome/css/v4-shims.css\" rel=\"stylesheet\" />\n<link href=\"../../../site_libs/panelset/panelset.css\" rel=\"stylesheet\" />\n<script src=\"../../../site_libs/panelset/panelset.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}