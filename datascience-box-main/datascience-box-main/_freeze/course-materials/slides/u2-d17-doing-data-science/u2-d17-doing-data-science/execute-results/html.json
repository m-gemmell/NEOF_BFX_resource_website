{
  "hash": "cdd5d5b00ba30678a1762cd088270424",
  "result": {
    "markdown": "---\ntitle: \"Doing data science\"\nsubtitle: \"<br><br> Data Science in a Box\"\nauthor: \"[datasciencebox.org](https://datasciencebox.org/)\"\noutput:\n  xaringan::moon_reader:\n    css: [\"../xaringan-themer.css\", \"../slides.css\"]\n    lib_dir: libs\n    anchor_sections: FALSE\n    nature:\n      ratio: \"16:9\"\n      highlightLines: true\n      highlightStyle: solarized-light\n      countIncrementalSlides: false\n---\n\n\n\n\nlayout: true\n  \n<div class=\"my-footer\">\n<span>\n<a href=\"https://datasciencebox.org\" target=\"_blank\">datasciencebox.org</a>\n</span>\n</div> \n\n---\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\nclass: middle\n\n# What's in a data analysis?\n\n\n---\n\n## Five core activities of data analysis\n\n1. Stating and refining the question\n1. Exploring the data\n1. Building formal statistical models\n1. Interpreting the results\n1. Communicating the results\n\n.footnote[\nRoger D. Peng and Elizabeth Matsui. \"The Art of Data Science.\" A Guide for Anyone Who Works with Data. Skybrude Consulting, LLC (2015).\n]\n\n---\n\n\nclass: middle\n\n# Stating and refining the question\n\n\n---\n\n## Six types of questions\n\n1. **Descriptive:** summarize a characteristic of a set of data\n1. **Exploratory:** analyze to see if there are patterns, trends, or relationships between variables (hypothesis generating)\n1. **Inferential:** analyze patterns, trends, or relationships in representative data from a population\n1. **Predictive:** make predictions for individuals or groups of individuals\n1. **Causal:** whether changing one factor will change another factor, on average, in a population\n1. **Mechanistic:** explore \"how\" as opposed to whether\n\n.footnote[\nJeffery T. Leek and Roger D. Peng. \"What is the question?.\" Science 347.6228 (2015): 1314-1315.\n]\n\n---\n\n\n## Ex: COVID-19 and Vitamin D\n\n1. **Descriptive:** frequency of hospitalisations due to COVID-19 in a set of data collected from a group of individuals\n--\n\n1. **Exploratory:** examine relationships between a range of dietary factors and COVID-19 hospitalisations\n--\n\n1. **Inferential:** examine whether any relationship between taking Vitamin D supplements and COVID-19 hospitalisations found in the sample hold for the population at large\n\n--\n1. **Predictive:** what types of people will take Vitamin D supplements during the next year\n\n--\n1. **Causal:** whether people with COVID-19 who were randomly assigned to take Vitamin D supplements or those who were not are hospitalised\n\n--\n1. **Mechanistic:** how increased vitamin D intake leads to a reduction in the number of viral illnesses\n\n\n---\n\n## Questions to data science problems\n\n- Do you have appropriate data to answer your question?\n- Do you have information on confounding variables?\n- Was the data you're working with collected in a way that introduces bias?\n\n--\n\n.question[\nSuppose I want to estimate the average number of children in households in Edinburgh. I conduct a survey at an elementary school in Edinburgh and ask students at this elementary school how many children, including themselves, live in their house. Then, I take the average of the responses. Is this a biased or an unbiased estimate of the number of children in households in Edinburgh? If biased, will the value be an overestimate or underestimate?\n]\n\n---\n\n\nclass: middle\n\n# Exploratory data analysis\n\n\n---\n\n## Checklist\n\n- Formulate your question\n- Read in your data\n- Check the dimensions\n- Look at the top and the bottom of your data\n- Validate with at least one external data source\n- Make a plot\n- Try the easy solution first\n\n---\n\n\n## Formulate your question\n\n- Consider scope:\n  - Are air pollution levels higher on the east coast than on the west coast?\n  - Are hourly ozone levels on average higher in New York City than they are in Los Angeles?\n  - Do counties in the eastern United States have higher ozone levels than counties in the western United States?\n- Most importantly: \"Do I have the right data to answer this question?\"\n\n\n---\n\n## Read in your data\n\n- Place your data in a folder called `data`\n- Read it into R with `read_csv()` or friends (`read_delim()`, `read_excel()`, etc.)\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(readxl)\nfav_food <- read_excel(\"data/favourite-food.xlsx\")\nfav_food\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 6\n  `Student ID` `Full Name`    favourite.food mealPlan AGE   SES  \n         <dbl> <chr>          <chr>          <chr>    <chr> <chr>\n1            1 Sunil Huffmann Strawberry yo… Lunch o… 4     High \n2            2 Barclay Lynn   French fries   Lunch o… 5     Midd…\n3            3 Jayendra Lyne  N/A            Breakfa… 7     Low  \n4            4 Leon Rossini   Anchovies      Lunch o… 99999 Midd…\n5            5 Chidiegwu Dun… Pizza          Breakfa… five  High \n```\n:::\n:::\n\n---\n\n\n## `clean_names()`\n\nIf the variable names are malformatted, use `janitor::clean_names()`\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(janitor)\nfav_food %>% clean_names()  \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 6\n  student_id full_name       favourite_food meal_plan age   ses  \n       <dbl> <chr>           <chr>          <chr>     <chr> <chr>\n1          1 Sunil Huffmann  Strawberry yo… Lunch on… 4     High \n2          2 Barclay Lynn    French fries   Lunch on… 5     Midd…\n3          3 Jayendra Lyne   N/A            Breakfas… 7     Low  \n4          4 Leon Rossini    Anchovies      Lunch on… 99999 Midd…\n5          5 Chidiegwu Dunk… Pizza          Breakfas… five  High \n```\n:::\n:::\n\n---\n\n## Case study: NYC Squirrels!\n\n- [The Squirrel Census](https://www.thesquirrelcensus.com/) is a multimedia science, design, and storytelling project focusing on the Eastern gray (*Sciurus carolinensis*). They count squirrels and present their findings to the public.\n- This table contains squirrel data for each of the 3,023 sightings, including location coordinates, age, primary and secondary fur color, elevation, activities, communications, and interactions between squirrels and with humans.\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n#install_github(\"mine-cetinkaya-rundel/nycsquirrels18\")\nlibrary(nycsquirrels18)\n```\n:::\n\n---\n\n\n## Locate the codebook\n\n[mine-cetinkaya-rundel.github.io/nycsquirrels18/reference/squirrels.html](https://mine-cetinkaya-rundel.github.io/nycsquirrels18/reference/squirrels.html)\n\n<br><br>\n\n--\n\n## Check the dimensions\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndim(squirrels)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 3023   35\n```\n:::\n:::\n\n---\n\n## Look at the top...\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsquirrels %>% head()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 35\n   long   lat unique_squirrel_id hectare shift date      \n  <dbl> <dbl> <chr>              <chr>   <chr> <date>    \n1 -74.0  40.8 13A-PM-1014-04     13A     PM    2018-10-14\n2 -74.0  40.8 15F-PM-1010-06     15F     PM    2018-10-10\n3 -74.0  40.8 19C-PM-1018-02     19C     PM    2018-10-18\n4 -74.0  40.8 21B-AM-1019-04     21B     AM    2018-10-19\n5 -74.0  40.8 23A-AM-1018-02     23A     AM    2018-10-18\n6 -74.0  40.8 38H-PM-1012-01     38H     PM    2018-10-12\n# … with 29 more variables: hectare_squirrel_number <dbl>,\n#   age <chr>, primary_fur_color <chr>,\n#   highlight_fur_color <chr>,\n#   combination_of_primary_and_highlight_color <chr>,\n#   color_notes <chr>, location <chr>,\n#   above_ground_sighter_measurement <chr>,\n#   specific_location <chr>, running <lgl>, chasing <lgl>, …\n```\n:::\n:::\n\n---\n\n\n## ...and the bottom\n\n.small[\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsquirrels %>% tail()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 35\n   long   lat unique_squirrel_id hectare shift date      \n  <dbl> <dbl> <chr>              <chr>   <chr> <date>    \n1 -74.0  40.8 6D-PM-1020-01      06D     PM    2018-10-20\n2 -74.0  40.8 21H-PM-1018-01     21H     PM    2018-10-18\n3 -74.0  40.8 31D-PM-1006-02     31D     PM    2018-10-06\n4 -74.0  40.8 37B-AM-1018-04     37B     AM    2018-10-18\n5 -74.0  40.8 21C-PM-1006-01     21C     PM    2018-10-06\n6 -74.0  40.8 7G-PM-1018-04      07G     PM    2018-10-18\n# … with 29 more variables: hectare_squirrel_number <dbl>,\n#   age <chr>, primary_fur_color <chr>,\n#   highlight_fur_color <chr>,\n#   combination_of_primary_and_highlight_color <chr>,\n#   color_notes <chr>, location <chr>,\n#   above_ground_sighter_measurement <chr>,\n#   specific_location <chr>, running <lgl>, chasing <lgl>, …\n```\n:::\n:::\n\n]\n\n\n---\n\n## Validate with at least one external data source\n\n.pull-left[\n::: {.cell layout-align=\"center\"}\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3,023 × 2\n    long   lat\n   <dbl> <dbl>\n 1 -74.0  40.8\n 2 -74.0  40.8\n 3 -74.0  40.8\n 4 -74.0  40.8\n 5 -74.0  40.8\n 6 -74.0  40.8\n 7 -74.0  40.8\n 8 -74.0  40.8\n 9 -74.0  40.8\n10 -74.0  40.8\n11 -74.0  40.8\n12 -74.0  40.8\n13 -74.0  40.8\n14 -74.0  40.8\n15 -74.0  40.8\n# … with 3,008 more rows\n```\n:::\n:::\n]\n.pull-right[\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](img/central-park-coords.png){fig-align='center' width=100%}\n:::\n:::\n]\n\n---\n\n\n## Make a plot\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(squirrels, aes(x = long, y = lat)) +\n  geom_point(alpha = 0.2)\n```\n\n::: {.cell-output-display}\n![](u2-d17-doing-data-science_files/figure-html/unnamed-chunk-10-1.png){fig-align='center' width=45%}\n:::\n:::\n\n\n--\n\n.pull-left-wide[\n**Hypothesis:** There will be a higher density of sightings on the perimeter than inside the park.\n]\n\n\n---\n\n## Try the easy solution first\n\n.panelset[\n\n.panel[.panel-name[Plot]\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u2-d17-doing-data-science_files/figure-html/unnamed-chunk-11-1.png){fig-align='center' width=60%}\n:::\n:::\n]\n\n.panel[.panel-name[Code]\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsquirrels <- squirrels %>%\n  separate(hectare, into = c(\"NS\", \"EW\"), sep = 2, remove = FALSE) %>%\n  mutate(where = if_else(NS %in% c(\"01\", \"42\") | EW %in% c(\"A\", \"I\"), \"perimeter\", \"inside\")) \n\nggplot(squirrels, aes(x = long, y = lat, color = where)) +\n  geom_point(alpha = 0.2)\n```\n:::\n]\n\n]\n\n---\n\n\n## Then go deeper...\n\n.panelset[\n\n.panel[.panel-name[Plot]\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](u2-d17-doing-data-science_files/figure-html/unnamed-chunk-12-1.png){fig-align='center' width=60%}\n:::\n:::\n\n]\n\n.panel[.panel-name[Code]\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhectare_counts <- squirrels %>%\n  group_by(hectare) %>%\n  summarise(n = n()) \n\nhectare_centroids <- squirrels %>%\n  group_by(hectare) %>%\n  summarise(\n    centroid_x = mean(long),\n    centroid_y = mean(lat)\n  )\n\nsquirrels %>%\n  left_join(hectare_counts, by = \"hectare\") %>%\n  left_join(hectare_centroids, by = \"hectare\") %>%\n  ggplot(aes(x = centroid_x, y = centroid_y, color = n)) +\n  geom_hex()\n```\n:::\n\n]\n\n]\n\n\n---\n\n## The squirrel is staring at me!\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsquirrels %>%\n  filter(str_detect(other_interactions, \"star\")) %>%\n  select(shift, age, other_interactions)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 11 × 3\n  shift age   other_interactions                                 \n  <chr> <chr> <chr>                                              \n1 AM    Adult staring at us                                      \n2 PM    Adult he took 2 steps then turned and stared at me       \n3 PM    Adult stared                                             \n4 PM    Adult stared                                             \n5 PM    Adult stared                                             \n6 PM    Adult stared & then went back up tree—then ran to differ…\n# … with 5 more rows\n```\n:::\n:::\n\n---\n\n\n## Communicating for your audience\n\n- Avoid: Jargon, uninterpreted results, lengthy output\n- Pay attention to: Organization, presentation, flow\n- Don't forget about: Code style, coding best practices, meaningful commits\n- Be open to: Suggestions, feedback, taking (calculated) risks\n",
    "supporting": [
      "u2-d17-doing-data-science_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../../site_libs/font-awesome/css/all.css\" rel=\"stylesheet\" />\n<link href=\"../../../site_libs/font-awesome/css/v4-shims.css\" rel=\"stylesheet\" />\n<link href=\"../../../site_libs/panelset/panelset.css\" rel=\"stylesheet\" />\n<script src=\"../../../site_libs/panelset/panelset.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}